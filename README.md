# Covid19_SQL

This project was worked out in frame of Engeto Data Academy course. The goal was to construct a panel data table, which will serve as a hypothetical platform for creation of mathematical model, describing the complex influence of many factors on the course and seriousness of the covid 19 pandemic in the particular countries. The factors include parameters which describe economical level, standard of living, weather and distribution of religion attendees in the countries. Furthermore, also specific parameter that gives an indirect information regarding the historical consequence in the given states is included (namely overall change in life expectancy over the last 50 years) and - of course - the parameters which are linked with the time-aspects. 

## Project solution

The project was written in SQL. The data source was the database _data.engeto.com_, to which I was connected using localhost. As a consequence, the results were not shared between the database users. Therefore, the direct output of the project are SQL scripts, which are designed to be postponed to the second side so that the second side can use the scripts to generate the required object which is the final table, as well as the auxiliary objects. 

### Auxiliary objects

This concept was chosen to help in understanding the creation process and to increase the transparency of the whole work. Rather than building one query using temporary tables, generated by the with clause, the solution contains the particular tables, which must be generated prior to creation of the final table. Although this solution forces the project evaluator to employ himself by creating the particular tables, it also brings him a great advantage to see the root objects from which the final table is generated. In the following text, there is a following typographic convention: 

**The particular tables are written in bold**

***The source tables from data.engeto.com are written in bold italics***

_The columns in the particular tables are written in italics_ 

#### Table of life expectancy

This table is called **t_life_expectancy_data** after it is created. It is one of a very few tables, which does not need a wide description. 
The data were mined from the source table ***life_expectancy_*** and following columns are present: 

_country_ : field of distinct countries from the source table

_life_expectancy_1965_ : contains the life expectancy in the countries, valid for the year 1965

_life_expectancy_2015_ : contains the life expectancy in the countries, valid for the year 2015

_life_expectancy_difference_: contains the difference in the values of life expectancy in the year 1965 and 2015

Among these columns, only the column _life_expectancy_difference_ is contained in the final table. 

#### Table of economical factors

This table is called **t_economy_data** after it is created. This table was created from the source table ***economies*** and consists of the following columns:

_country_ : includes distinct countries from the source table

_unit_GDP_ : includes the GDP for the given country, recalculated to one resident of the country (overall GDP divided by the overall population of the state)

_unit_GDP_year_ : includes the year from which the record in _unit_GDP_ is valid for the given country

_gini_coeficient_ : includes the GINI coeficient for the given country

_gini_calc_period_ : includes the time period from which the average GINI coeficient was calculated

_mortality_under_5_ : includes the mortality of children before reaching age of 5 years

Of course, the approach leading to creation of this table must be explained. The default data set, obtained from ***economies*** is little bit problematic in relation to the project task. There are 3 problems: 

1) There are no data for the year 2020 that would serve as best information source, because the data from pandemics are evaluated, which began in 2020. Therefore, older years were evaluated and used for the table creation.  

2) For most countries, the GDP and population are accesible from the year 2019, but still, for many countries the most actual data are from the year 2018

3) A very problematic quantity is GINI coeficient. The presence of this parameter differs very much from country to country - while some countries have multiple values in the last 5 years, some of the other countries do not have any records since 2015 and there are also many contries that do not have any estimation of this parameter since 2010. 

The afforementioned problems lead to specific solution of the table columns: 

1) The data in _unit_GDP_ were obtained from the year 2019 and if it was not possible due to the data inaccessibility for the given country, the value was obtained using the data from the year 2018. If even the values from the year 2018 were inaccesible, the _unit_GDP_ was set as NULL. The column _unit_GDP_year_ gives the information regarding the year from which the data were used to calculated the corresponding value in the column _unit_GDP_ for the given state, to distinguish between the manners of obtaining unit GDP for the given country. 

2) The data in _gini_coeficient_ were calculated as average value from period 2015 - 2019 and if it was not possible due to the data inaccessibility for the given country in this (relatively actual) period, the average values from period 2010 - 2014 were calculated instead. If even the calculation of GINI coeficeint using the data from period 2010 - 2014 was impossible, the _gini_coeficient_ was set as NULL. The column _gini_calc_period_ refers to the period from which the average GINI coeficient was calculated for the given state, in order to distinguish the cases of how the parameter was obtained.  

All of the afforementioned columns are present in the final table, except from the key column _countries_. In my opinion, the person who will create the model should have the possibility to know the complementary information, from which year or period the data were obtained. Then, he can decide whether he will include the data to the set for model depending on how they are actual, he can scale them according to their validity (to give lower weight to the older GDPs and GINI coeficients) etc.

#### Table of weather data

This table is called **t_weather_data** after it is created. The source data for this table are gained from the table ***weather*** in database data.engeto.com. The columns in **t_weather_data** are the following: 

_date_ : includes the date at which the weather parameters were determined

_city_ : includes the city in which the weather parameters were determined

_avg_temp_ : includes the average temperture for given city at given date during the day (night excluded)

_max_wind_ : includes the maximum wind speed for given city at given date during the day (night excluded)

_rainy_hours_ : includes the approximation of the rainy hours amount at given date during the day (night excluded)

All of the parameters _avg_temp_, _max_wind_ and _rainy_hours_ are determined using the data from table weather where the time is 06:00, 09:00, 12:00, 15:00, 18:00 and 21:00. This is in accordance with the assumption that weather influences the behaviour of the people, but most of them are active only during the day. Therefore, the weather data from the night are excluded. 

Important note must be stated, regarding the parameter _rainy_hours_. The amount of rainy hours is a raw approximation because only cumulative data are accessible at the times mentioned above. In case when there is an amount of precipitations above zero as a sum at 9:00, this information is expressed as 3 rainy hours in the array _rainy_hours_ (as if it would rain from 6:00 to 9:00). This is done despite the real situation can be that during that 3 hours, there was 10 minutes of rain, giving the overall sum of precipitations above zero, and this short rain did not influence so many people as the real 3 hours lasting rain. Nevertheless, there is no clue to improve the approximation in this way.

Furthermore, let me now shoot into my own work a little bit more. The weather data are only accessible for cities, and even these cities are only capitals of the European states. Therefore, the weather impacts can be evaluated only for Europe. And what is more, the weather in the selected country is approximated by the weather in its capital city. As a fan of meteorology and climatology, I do not like to see this approach, because even in a small country like Czech Republic, we know high difference regarding the weather in the same time from west to east, from lowlands to mountains, effect of the Prague warm city island that surely will be present also for some of the other cities, and many other effects.
